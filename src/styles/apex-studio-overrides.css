/**
 * Apex Studio — Complete Twick Studio CSS overrides
 * Full white-label rebrand to match Apex's cinematic dark identity.
 */

/* ═══════════════════════════════════════════════
   0. APEX ANIMATIONS
   ═══════════════════════════════════════════════ */

@keyframes apex-loader {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(0%); }
  100% { transform: translateX(100%); }
}

.animate-apex-loader {
  animation: apex-loader 1.5s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════
   1. COLOR SYSTEM OVERRIDE
   ═══════════════════════════════════════════════ */

.studio-container,
[class*="studio-"] {
  /* Force app font system onto SDK */
  font-family: 'Instrument Sans', system-ui, -apple-system, sans-serif !important;
  font-size: 13px !important;
  line-height: 1.5 !important;

  --color-neutral-900: hsl(250 15% 4%);
  --color-neutral-800: hsl(250 12% 8%);
  --color-neutral-700: hsl(250 10% 13%);
  --color-neutral-600: hsl(250 8% 18%);
  --color-neutral-500: hsl(240 16% 32%);
  --color-neutral-400: hsl(240 5% 55%);
  --color-neutral-300: hsl(240 5% 74%);

  --color-gray-100: hsl(240 5% 93%);
  --color-gray-200: hsl(240 5% 85%);
  --color-gray-300: hsl(240 5% 72%);
  --color-gray-400: hsl(240 5% 58%);
  --color-gray-500: hsl(240 5% 42%);
  --color-gray-600: hsl(250 10% 27%);
  --color-gray-700: hsl(250 10% 18%);
  --color-gray-800: hsl(250 12% 11%);
  --color-gray-900: hsl(250 15% 6%);

  /* Apex violet accent system */
  --color-purple-400: hsl(263 70% 68%);
  --color-purple-500: hsl(263 70% 58%);
  --color-purple-600: hsl(263 70% 48%);
  --color-purple-700: hsl(263 70% 40%);
  --color-purple-muted: hsla(263 70% 58% / 0.15);

  /* Blue accents → violet */
  --color-blue-400: hsl(263 70% 68%);
  --color-blue-500: hsl(263 70% 58%);
  --color-blue-600: hsl(263 70% 48%);

  /* Elevation tokens */
  --elevation-panel: 0 0 0 1px hsla(263 70% 58% / 0.06), 0 8px 32px hsla(0 0% 0% / 0.5);
  --elevation-scrubber: 0 0 8px hsla(263 70% 58% / 0.8);
}

/* Force font consistency on ALL SDK text elements */
.studio-container *,
.studio-container button,
.studio-container input,
.studio-container select,
.studio-container label,
.studio-container span,
.studio-container p,
.studio-container div {
  font-family: inherit !important;
}

/* SDK headings use display font */
.studio-container h1,
.studio-container h2,
.studio-container h3,
.studio-container h4 {
  font-family: 'Sora', system-ui, sans-serif !important;
  letter-spacing: -0.02em !important;
}

/* SDK buttons match app button sizing */
.studio-container button {
  font-size: 13px !important;
  border-radius: calc(0.75rem - 4px) !important;
  font-weight: 500 !important;
  transition: all 0.15s ease !important;
}

/* ═══════════════════════════════════════════════
   2. HIDE TWICK'S BUILT-IN HEADER COMPLETELY
   ═══════════════════════════════════════════════ */

/* The Apex chrome bar replaces Twick's header entirely */
.header,
[class*="studio-header"],
[class*="StudioHeader"] {
  display: none !important;
  height: 0 !important;
  overflow: hidden !important;
}

/* ═══════════════════════════════════════════════
   3. SURFACE OVERRIDES — deep dark everywhere
   ═══════════════════════════════════════════════ */

.studio-container,
.studio-content,
.main-container {
  background: hsl(250 15% 4%) !important;
}

/* Let the SDK manage its own height — our flex container constrains it */

/* Left panel — media / tools */
.studio-left-panel,
.left-panel,
[class*="panel-left"],
[class*="sidebar"] {
  background-color: hsl(240 25% 5% / 0.98) !important;
  border-right: 1px solid hsla(263 84% 58% / 0.08) !important;
}

/* Right panel — properties */
.studio-right-panel,
.right-panel,
[class*="panel-right"],
[class*="properties-panel"] {
  background-color: hsl(240 25% 5% / 0.98) !important;
  border-left: 1px solid hsla(263 84% 58% / 0.08) !important;
}

/* Canvas area — subtle ambient glow */
.canvas-wrapper,
[class*="canvas-area"],
[class*="player-wrapper"] {
  background: radial-gradient(
    circle at center,
    hsla(263 84% 58% / 0.02),
    hsla(0 0% 0% / 0.7)
  ) !important;
}

/* Context menu — Apex themed */
.studio-container .twick-canvas-context-menu {
  background: hsl(240 25% 6% / 0.98) !important;
  border: 1px solid hsla(263 84% 58% / 0.12) !important;
  box-shadow: 0 12px 40px hsla(0 0% 0% / 0.6) !important;
}

.studio-container .twick-canvas-context-menu-item {
  color: hsl(240 20% 90%) !important;
}

.studio-container .twick-canvas-context-menu-item:hover {
  background: hsla(263 84% 58% / 0.12) !important;
}

.studio-container .twick-canvas-context-menu-separator {
  background: hsla(263 84% 58% / 0.08) !important;
}

/* Drop preview — Apex violet */
.studio-container .twick-drop-preview {
  background: hsla(263 84% 58% / 0.25) !important;
  border: 2px dashed hsla(263 84% 58% / 0.5) !important;
}

/* ═══════════════════════════════════════════════
   4. TIMELINE — Raised, prominent workspace
   ═══════════════════════════════════════════════ */

/* Force the canvas area to share space with a taller timeline */
.studio-container .main-container {
  display: flex !important;
  flex-direction: column !important;
}

.studio-container .canvas-wrapper {
  flex: 1 1 0% !important;
  max-height: 52% !important;
  min-height: 180px !important;
}

/* Give the timeline section real estate — minimum 40% of main area */
.studio-container .twick-editor-timeline-section {
  min-height: 260px !important;
  flex: 1 1 auto !important;
  background: hsl(240 28% 4%) !important;
  border-top: 2px solid hsla(263 84% 58% / 0.15) !important;
  border-radius: 0 !important;
}

.studio-container .twick-timeline-scroll-container {
  flex: 1 !important;
  overflow-y: auto !important;
}

/* Taller individual tracks for better visibility */
.studio-container .twick-track {
  height: 3.5rem !important;
  margin-top: 3px !important;
  background-color: hsl(240 20% 10%) !important;
  border-radius: 6px !important;
}

.studio-container .twick-timeline-container {
  height: 3rem !important;
}

/* Seek track / ruler */
.studio-container .twick-seek-track {
  background-color: hsl(240 25% 6%) !important;
  border-top: 1px solid hsla(263 84% 58% / 0.08) !important;
  border-bottom: 1px solid hsla(263 84% 58% / 0.08) !important;
}

.studio-container .twick-seek-track-empty-space {
  background-color: hsl(240 25% 5%) !important;
}

/* Player controls bar — more prominent */
.studio-container .player-controls {
  height: 3.25rem !important;
  background-color: hsl(240 25% 5%) !important;
  border-top: 1px solid hsla(263 84% 58% / 0.10) !important;
}

/* Track headers — Apex-styled */
.studio-container .twick-track-header {
  background-color: hsl(240 25% 6%) !important;
  border-right: 1px solid hsla(263 84% 58% / 0.08) !important;
  min-width: 44px !important;
}

/* Track element clips — better visibility */
.studio-container .twick-track-element {
  border-radius: 8px !important;
  box-shadow: 0 2px 8px hsla(0 0% 0% / 0.3) !important;
}

.studio-container .twick-track-element-selected {
  border: 2px solid hsl(263 84% 68%) !important;
  box-shadow: 0 0 0 2px hsla(263 84% 58% / 0.3), 0 2px 8px hsla(0 0% 0% / 0.4) !important;
}

.studio-container .twick-track-element-content {
  font-size: 12px !important;
  padding: 0.35rem 0.5rem !important;
}

/* Playhead — vivid Apex violet */
.studio-container .twick-seek-track-pin {
  background-color: hsl(263 84% 58%) !important;
  box-shadow: 0 0 10px hsla(263 84% 58% / 0.7) !important;
}

.studio-container .twick-seek-track-handle {
  background-color: hsl(263 70% 78%) !important;
  border-radius: 3px !important;
  box-shadow: 0 2px 8px hsla(0 0% 0% / 0.5) !important;
}

/* Legacy selectors for compatibility */
[class*="timeline-container"],
[class*="timeline-wrapper"],
.timeline {
  background: hsl(240 28% 5%) !important;
  border-top: 1px solid hsla(263 84% 58% / 0.10) !important;
}

[class*="playhead"],
[class*="scrubber-line"] {
  background: hsl(263 84% 58%) !important;
  box-shadow: 0 0 8px hsla(263 84% 58% / 0.6) !important;
}

[class*="track-row"]:hover,
[class*="timeline-track"]:hover {
  background: hsla(263 84% 58% / 0.03) !important;
}

/* ═══════════════════════════════════════════════
   5. BUTTONS & CONTROLS
   ═══════════════════════════════════════════════ */

.studio-container button[class*="primary"],
.studio-container [class*="btn-primary"] {
  background: linear-gradient(135deg, hsl(263 84% 58%), hsl(270 80% 60%)) !important;
  border: none !important;
  color: white !important;
}

.studio-container button[class*="primary"]:hover,
.studio-container [class*="btn-primary"]:hover {
  background: linear-gradient(135deg, hsl(263 84% 64%), hsl(270 80% 66%)) !important;
}

.studio-container button[class*="ghost"],
.studio-container button[class*="secondary"] {
  color: hsl(240 14% 74%) !important;
}

.studio-container button[class*="ghost"]:hover,
.studio-container button[class*="secondary"]:hover {
  background: hsla(263 84% 58% / 0.08) !important;
  color: hsl(240 20% 93%) !important;
}

.studio-container [class*="tab-item"],
.studio-container [role="tab"] {
  color: hsl(240 12% 59%) !important;
  border-bottom-color: transparent !important;
}

.studio-container [class*="tab-item"][class*="active"],
.studio-container [role="tab"][aria-selected="true"],
.studio-container [class*="tab-item"]:hover {
  color: hsl(263 70% 68%) !important;
  border-bottom-color: hsl(263 84% 58%) !important;
}

/* ═══════════════════════════════════════════════
   6. MEDIA LIBRARY
   ═══════════════════════════════════════════════ */

.media-item:hover,
[class*="media-item"]:hover,
[class*="library-item"]:hover {
  box-shadow: 0 4px 12px -2px hsla(263 84% 58% / 0.25) !important;
  border-color: hsla(263 84% 58% / 0.3) !important;
}

[class*="media-item"][class*="selected"],
[class*="library-item"][class*="selected"] {
  border-color: hsl(263 84% 58%) !important;
  box-shadow: 0 0 0 2px hsla(263 84% 58% / 0.3) !important;
}

/* Hide the "paste URL" link input in media library */
.studio-container [class*="url-input"],
.studio-container [class*="paste-url"],
.studio-container [class*="add-url"],
.studio-container [class*="media-url"],
.studio-container [class*="link-input"],
.studio-container input[placeholder*="URL"],
.studio-container input[placeholder*="url"],
.studio-container input[placeholder*="Paste"],
.studio-container input[placeholder*="paste"],
.studio-container input[placeholder*="http"] {
  display: none !important;
}

[class*="upload-zone"],
[class*="drop-zone"] {
  border-color: hsla(263 84% 58% / 0.2) !important;
  background: hsla(263 84% 58% / 0.03) !important;
}

[class*="upload-zone"]:hover,
[class*="drop-zone"]:hover {
  border-color: hsla(263 84% 58% / 0.4) !important;
  background: hsla(263 84% 58% / 0.06) !important;
}

/* ═══════════════════════════════════════════════
   7. INPUTS & FORM CONTROLS
   ═══════════════════════════════════════════════ */

.studio-container input,
.studio-container select,
.studio-container textarea {
  background: hsl(240 25% 6% / 0.8) !important;
  border-color: hsla(263 84% 58% / 0.12) !important;
  color: hsl(240 20% 93%) !important;
}

.studio-container input:focus,
.studio-container select:focus,
.studio-container textarea:focus {
  border-color: hsl(263 84% 58%) !important;
  box-shadow: 0 0 0 2px hsla(263 84% 58% / 0.15) !important;
}

.studio-container input[type="range"]::-webkit-slider-thumb {
  background: hsl(263 84% 58%) !important;
}

.studio-container input[type="range"]::-webkit-slider-runnable-track {
  background: hsla(263 84% 58% / 0.2) !important;
}

/* ═══════════════════════════════════════════════
   8. PROGRESS & LOADING
   ═══════════════════════════════════════════════ */

.progress-bar,
[class*="progress-fill"] {
  background: linear-gradient(to right, hsl(263 84% 58%), hsl(280 70% 60%)) !important;
}

.aspect-ratio-btn:hover {
  color: hsl(263 70% 68%) !important;
}

/* ═══════════════════════════════════════════════
   9. TOOLTIPS & POPOVERS
   ═══════════════════════════════════════════════ */

.studio-container [class*="tooltip"],
.studio-container [class*="popover"] {
  background: hsl(240 25% 6% / 0.95) !important;
  border: 1px solid hsla(263 84% 58% / 0.12) !important;
  color: hsl(240 20% 93%) !important;
  box-shadow: 0 8px 24px hsla(0 0% 0% / 0.5) !important;
}

/* ═══════════════════════════════════════════════
   10. CONTEXT MENUS
   ═══════════════════════════════════════════════ */

.studio-container [class*="context-menu"],
.studio-container [role="menu"] {
  background: hsl(240 25% 6% / 0.98) !important;
  border: 1px solid hsla(263 84% 58% / 0.10) !important;
  box-shadow: 0 12px 40px hsla(0 0% 0% / 0.6) !important;
}

.studio-container [role="menuitem"]:hover {
  background: hsla(263 84% 58% / 0.1) !important;
}

/* ═══════════════════════════════════════════════
   11. SCROLLBARS
   ═══════════════════════════════════════════════ */

.studio-container ::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

.studio-container ::-webkit-scrollbar-track {
  background: transparent;
}

.studio-container ::-webkit-scrollbar-thumb {
  background: hsla(263 84% 58% / 0.2);
  border-radius: 2px;
}

.studio-container ::-webkit-scrollbar-thumb:hover {
  background: hsla(263 84% 58% / 0.35);
}

/* ═══════════════════════════════════════════════
   12. HIDE ALL TWICK BRANDING
   ═══════════════════════════════════════════════ */

.studio-container a[href*="twick"],
.studio-container [data-twick-brand],
[class*="powered-by"],
[class*="twick-logo"],
[class*="twick-brand"] {
  display: none !important;
}

/* Hide SDK watermark text on canvas */
.studio-container [class*="watermark"],
.studio-container [class*="Watermark"],
.studio-container canvas + div:not([class*="controls"]):not([class*="toolbar"]):not([class*="panel"]) {
  opacity: 0 !important;
  pointer-events: none !important;
}

/* ═══════════════════════════════════════════════
   13. SELECTION & FOCUS RINGS
   ═══════════════════════════════════════════════ */

.studio-container *:focus-visible {
  outline: 2px solid hsla(263 84% 58% / 0.5) !important;
  outline-offset: 2px !important;
}

.studio-container ::selection {
  background: hsla(263 84% 58% / 0.3);
  color: white;
}

/* ═══════════════════════════════════════════════
   14. TRANSITIONS — smooth Apex feel
   ═══════════════════════════════════════════════ */

.studio-container button:not([class*="primary"]),
.studio-container [role="tab"],
.studio-container [class*="media-item"],
.studio-container input {
  transition: all 0.15s ease !important;
}

/* ═══════════════════════════════════════════════
   15. DIALOG / MODAL OVERRIDES
   ═══════════════════════════════════════════════ */

.studio-container [class*="modal"],
.studio-container [class*="dialog"],
.studio-container [role="dialog"] {
  background: hsl(240 25% 7%) !important;
  border: 1px solid hsla(263 84% 58% / 0.12) !important;
  box-shadow: 0 24px 60px hsla(0 0% 0% / 0.7) !important;
}

/* ═══════════════════════════════════════════════
   16. DRAG HANDLES & RESIZE GRIPS
   ═══════════════════════════════════════════════ */

[class*="resize-handle"],
[class*="drag-handle"] {
  background: hsl(263 84% 58%) !important;
  border-color: hsl(263 70% 68%) !important;
}

[class*="selection-box"],
[class*="selection-rect"] {
  border-color: hsl(263 84% 58%) !important;
  background: hsla(263 84% 58% / 0.08) !important;
}
